package com.sisyphus;


public class City {
	
	private long localPop;
	private long localRes;
	private String name;
	private boolean[] tags = new boolean[GlobalConstants.NUM_TAGS];
	
	public City(/*boolean[] ptags, */String pname){
		localPop = GlobalConstants.STARTING_POP;
		localRes = GlobalConstants.STARTING_RES;
		//tags=ptags;
		name = pname;
	}

	public long grow(long rate, long max){
		if((localRes-10*localPop)>=0){
			upKeep(GlobalConstants.RATE);
			localPop += (long)(rate*localPop*(1.0-(localPop)/max));
			return localPop;
		}
		else{
			localPop -= localPop*(2.0/100.0);
			return localPop;
		}
	}
	
		
	public long upKeep(long rate){
		long loss = (rate*localPop)/10;
		
		if (localRes - loss < 0) {
			loss = localRes;
			localRes = 0;
			return loss;
		}		
		
		localRes -= loss;
		return loss;
	}
	
	public void gainPop(long transfer){
		localPop += transfer;
	}
	
	public void gainRes(long transfer){
		localRes += transfer;
	}
	
	public long transferPop(long numLoss){
		if (localPop - numLoss < 0) {
			localPop = 0;
			
			return numLoss;
		}
		
		localPop -= numLoss;
		return numLoss;
	}
	
	public long transferRes(long numLoss){
		localRes -= numLoss;
		return numLoss;
	}
	
	public long getLocalPop() {
		return this.localPop;
	}
	
	public long getLocalRes() {
		return this.localRes;
	}
	
	public String getName() {
		return this.name;
	}
}
